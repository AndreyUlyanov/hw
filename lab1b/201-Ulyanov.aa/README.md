# Лабораторная работа 1b

Написана на Python. 

## Запуск
Для запуска сервера в командную строку необходимо ввести `python server.py`.

Для запуска клиента в командную строку необходимо ввести `python client.py`.

## Описание команд 
Клиент поддерживает две команды:
1) `!send {filename}` для отправки файла
2) `!exit` для выхода из чата

## Описание протокола
Протокол подразумевает последовательность действий:

1) **Установка соединения.** Может быть только первым, в остальных ситуациях не является корректным.
2) **Передача сообщений.** Выполняется в любой момент между установкой соединения и его завершением.
3) **Завершение соединения.** Может быть выполнено только после установки соединения.

## Формат пакета

**От клиента:**
+ без файла:

message_length | message |
--- | --- |

+ с файлом:

message_length | message 
--- | --- |

file_sha_length | file_sha | file_data_length | file_data
--- | --- | --- | --- |

**От сервера:**

Вне зависимости от типа сообщения:

time_length | time_utc | nickname_length | nickname | message_length | message |
--- | --- | --- | --- | --- | --- |

Сервером передаётся время в формате: `%Y-%m-%d %H:%M:%S.%f, где Y - год, m - месяц, d - день, H - часы, M - минуты, S - секунды, f - миллисекунды`.

## Подключение к серверу
При подключении клиент должен отправить на сервер сообщение со своим никнеймом. 

Если такой никнейм уже есть, то сервер прекратит общение с клиентом.

При подключении клиента к серверу всем участникам будет отправлено сообщение:
`{nickname} joined.`

При выходе клиента из чата всем участникам будет отправлено сообщение: 
`{nickname} left.`

## Отключение от сервера

Для отключения от сервера пользователю просто надо написать `!exit` в чат. 

После этого все участники чата получат сообщение:
`{nickname} left`
